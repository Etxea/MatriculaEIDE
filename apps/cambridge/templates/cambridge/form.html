{% extends "site_base.html"%}
{% load i18n %}
{% load bootstrap_tags %}


{% block body %}
    <script>
	function comprobar_aceptacion() {
                console.log("Han hecho click en el check de las condiciones");
                if ($("#id_accept_conditions").is(":checked") && $("#id_accept_photo_conditions").is(":checked")) {
                    console.log("Dice que las acepta");
                    $("#send_form").prop('disabled', false);
		    console.log("Ocultamos el aviso");
		    $("#aviso_condiciones").hide();
                }
                else {
		    //Deshabilitamos el envio hasta que acepten las condiciones
                    console.log("Dice que NO las acepta");
                    $("#send_form").prop('disabled', true);
		    console.log("Mostramos el aviso");
		    $("#aviso_condiciones").show();
                }
            }
	function comprobar_menor() {
                console.log("Han hecho click en el check de menor");
                if ($("#id_minor").is(":checked")) {
                    console.log("Dice que es menor");
		    $("#id_tutor_name").prop('disabled', false);
		    $("#id_tutor_surname").prop('disabled', false);
		    
                }
                else {
		    //Deshabilitamos el envio hasta que acepten las condiciones
                    console.log("Dice que NO es menor");
		    $("#id_tutor_name").prop('disabled', true);
		    $("#id_tutor_surname").prop('disabled', true);
                    
                }
            }
        $(document).ready(function() {
	    $("#normativa_general").hide();
	    $("#normativa_foto").hide();
            //Comprobamos si se puede enviar
	    comprobar_aceptacion();
	    comprobar_menor();
            $("#id_centre_name").prop('disabled', false);
            //Control de la aceptación de las condiciones:
            $("#id_accept_conditions").change(comprobar_aceptacion);
	    $("#id_accept_photo_conditions").change(comprobar_aceptacion);
	    $("#id_minor").change(comprobar_menor);
            //Control del Centre Name 
            $("#id_eide_alumn").change(function() {
                console.log("Han hecho click en el check de alumno de eide");
                if ($("#id_eide_alumn").is(":checked")) {
                    console.log("Dice que es alumno de EIDE, desactivamos el input centrename");
                    $("#id_centre_name").prop('disabled', true);
                }
                else {
                    console.log("Dice que NO es alumno de EIDE, activamos el input centrename");
                    $("#id_centre_name").prop('disabled', false);
                }
            });            
        });
    </script>

{% block cambridge_form_header %}{% endblock %}
<div class="row">
    <div class="span12">
	{% block cambridge_form_action %}{% endblock %}
	<h2>{% trans "Matrícula" %}</h2>
	{{ form|as_bootstrap }}
    </div> 
</div>


<div class="row">
    <div class="span12">
	{% include "cambridge/legal.html" %}
	<div>
	    ¿Aceptas las condiciones? <input type="checkbox" id="id_accept_conditions_farsa" name="accept_conditions_farsa">
        </div>
	
    </div> 
</div>
<hr />
<div class="row">
    <div class="span12">
	{% include "cambridge/legal_foto.html" %}

	<div>
	    ¿Aceptas las condiciones para la toma de la foto?
	    <input type="checkbox" id="id_accept_photo_conditions" name="accept_photo_conditions">
        </div>
    </div> 
</div>
<hr />

<div class="row">
    <div class="span12">    
	<div class="well" id="aviso_condiciones">
	    {% trans "<b>Atención!.</b> Todavía no has aceptado las condiciones. Si no aceptas las condiciones generales y las condiciones de la toma de foto no podrás enviar la matrícula." %}
	</div>
	<input id="send_form" class="btn btn-primary pull-right" type="submit" value="{% trans 'Submit' %}" />
    </div> 
</div> 

{% endblock %}
